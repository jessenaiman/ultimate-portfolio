---
// Unified layout system with enhanced flexibility and features
// Documentation: https://docs.astro.build/en/guides/layouts/
// DaisyUI 5+ Themes: https://daisyui.com/docs/themes/
// TailwindCSS 4+ Typography: https://tailwindcss.com/docs/typography-plugin
import Head from "../components/ui/Head.astro";
import Navbar from "../components/ui/Navbar.astro";
import Footer from "../components/ui/Footer.astro";
import "../styles/global.css";

// Simple, modern props (no variants)
const {
  title,
  description = "Professional web development portfolio showcasing modern frameworks and best practices",
  showHeader = true,
  showFooter = true,
  fullWidth = false,
  // Layout tuning
  maxWidth = "screen", // "prose" | "screen" | "wide"
  padding = "md", // "none" | "sm" | "md" | "lg"
} = Astro.props;

// Max width + padding mappings
const maxWidthClass = (
  maxWidth === "prose" ? "max-w-prose" :
  maxWidth === "wide" ? "max-w-7xl" :
  "max-w-screen-xl"
);

const paddingClass = (
  padding === "none" ? "p-0" :
  padding === "sm" ? "p-4 sm:p-6" :
  padding === "lg" ? "p-8 sm:p-12" :
  "p-6 sm:p-8"
);
---

<!-- Dynamic theme and smooth scrolling -->
<html lang="en" class="scroll-smooth" transition:name="root" transition:animate="fade">
  <Head title={title} description={description}>
    <slot name="head" />
  </Head>
  
  <!-- Animated background elements -->
  <div class="fixed inset-0 -z-10 overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-base-100 via-base-200/80 to-base-100/80 transition-colors duration-500"></div>
    <div 
      class="absolute inset-0 opacity-20" 
      style="background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiM0NDQiIGZpbGwtb3BhY2l0eT0iMC4yIj48cGF0aCBkPSJNMzYgMzRjMC0yLjIwOS0xLjc5MS00LTQtNHMtNCAxLjc5MS00IDQgMS43OTEgNCA0IDQgNC0xLjc5MSA0LTR6bS0yIDBjMCAxLjEwNC0uODk2IDItMiAycy0yLS44OTYtMi0yIC44OTYtMiAyLTIgMiAuODk2IDIgMnoiLz48L2c+PC9nPjwvc3Zn')"
    ></div>
  </div>

  <body 
    class={`min-h-screen flex flex-col bg-base-100 text-base-content transition-all duration-300 ease-in-out antialiased font-sans relative scroll-smooth ${paddingClass} active:scale-[0.99] active:opacity-90 transition-transform duration-100 ease-out`}
    transition:name="page-container"
  >
    <!-- Header with improved glass effect and border -->
    {showHeader && (
      <header class="sticky top-0 z-50 backdrop-blur-sm bg-base-100/80 border-b border-base-200">
        <Navbar />
      </header>
    )}

    <!-- Main content with improved spacing and container -->
    <main class="flex-1 w-full transition-all duration-300 fluid-space-y break-words hyphens-auto" transition:name="main-content">
      {fullWidth ? (
        <slot />
      ) : (
        <div class={`container mx-auto px-4 w-full ${maxWidthClass} ${paddingClass}`} transition:name="content-wrapper">
          <slot />
        </div>
      )}
    </main>
    
    <!-- Sticky footer with glass effect -->
    {showFooter && (
      <footer class="footer footer-center bg-base-200/80 text-base-content border-t border-base-300/50 p-6 backdrop-blur-sm transition-colors duration-500">
        <Footer />
      </footer>
    )}
  </body>
</html>
